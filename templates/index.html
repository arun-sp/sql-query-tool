<!DOCTYPE html>
<html>
    <head>
      
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

        <style type="text/css">
            i {font-size:1.1rem; }
            span {font-size:13pt;}
            table {font-size: 14px;}
            #inp {font-size: 14px;}
            #db {font-size: 14px;}
        </style>

        <title>SQL Query Tool</title>

    </head>
    <body>

        <!-- As a heading -->
        <nav class="navbar-header navbar-default navbar-dark bg-dark pb-3 pt-3">
            <div class="container px-4">
                <span class="navbar-brand mb-0 h1">SQL Query Tool</span>
            </div>
        </nav>

        <div class="container pt-3 px-2">
            <div class="row">
                <div class="col-md-4 py-1 px-3">                    
                    <div class="my-3">
                        <form class="row g-3 pb-2" method="post">

                            <input type="hidden" name="form" value = "connect">

                            <div class="col-md-5">
                                <select class="form-select" type="input" name="db" id="db" required>
                                    <option selected disabled value="">Select DB</option>
                                    <option value=1>MySQL</option>
                                    <option value=2>PostgreSQL</option>
                                </select>
                            </div>

                            <div class="col-md-12">
                                <input type="text" class="form-control" name="host" placeholder="Host" id="inp" value={{host}}>
                            </div>

                            <div id="port" class="col-md-4">
                                <input type="text" class="form-control" name="port" placeholder="Port" id="inp" value={{port}}>
                            </div>

                            <div class="col-md-8">
                                <input type="text" class="form-control" name="dbname" placeholder="DB Name" id="inp" value={{dbname}}> 
                            </div>

                            <div class="col-md-6">
                                <input type="text" class="form-control" name="user" placeholder="Username" id="inp" value={{user}}>
                            </div>
                            
                            <div class="col-md-6">
                                <input type="password" class="form-control" name="pw" placeholder="Password" id="inp" value={{pw}}>
                            </div>
                            
                            <div class="col-12">
                                <button type="submit" class="btn btn-primary" id="inp"> Connect </button>
                            </div>

                        </form>
                    </div> 

                    <div class="my-3">
                        <form class="row g-3" method="post">

                            <input type="hidden" name="form" value = "query">

                            <div>
                                <textarea class="form-control" rows="4" name="query" id="inp" placeholder="Query">{{query}}</textarea>
                            </div>

                            <div class="col-12">
                                <button type="submit" class="btn btn-primary" id="inp"> Run Query </button>
                            </div>    
                            
                        </form>
                    </div>
                </div>

                <div id="table" class="col-md-8 border-start py-2 px-3">
                    
                    <p p-2>{{error}}</p>
                    <p p-2>{{status}}</p>

                    <table style="width:100%;" class="table table-sm">

                        <thead class="table-dark">
                            <tr>
                                {% for i in headers %}
                                    <th class="px-1"> {{i}}</th>
                                {% endfor %}
                            </tr>        
                        </thead>
                        
                        <tbody>
                        {% for row in result %}
                            <tr>
                            {% for col in row %}
                                <td class="px-1">{{col}}</td>
                            {% endfor %}
                            </tr>
                        {% endfor %}                            
                        </tbody>
                    
                    </table>
                </div>
            </div>
        </div>

        <!-- Option 1: Bootstrap Bundle with Popper -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
        <script>
            let db = parseInt('{{ db }}');
            document.getElementById("db").selectedIndex = parseInt(db);
        </script>
      
    </body>
</html>
